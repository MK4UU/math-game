<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>×—×©×‘×•×Ÿ ×”×’×™×‘×•×¨×™× âš¡</title>
    <style>
        :root {
            --plus: #4CAF50; --minus: #FF9800; --mult: #9C27B0;
            --bg: #f0f9ff; --text: #2c3e50;
        }

        body {
            font-family: 'Assistant', 'Segoe UI', sans-serif; background-color: var(--bg);
            margin: 0; display: flex; flex-direction: column; align-items: center;
            height: 100vh; overflow: hidden;
        }

        /* ××¡×›×™ ×”××¤×œ×™×§×¦×™×” */
        .screen { display: none; flex-direction: column; align-items: center; justify-content: center; width: 100%; height: 100%; text-align: center; }
        .active { display: flex; }

        /* ×›×•×ª×¨×ª ×¢×œ×™×•× ×” */
        .status-bar {
            width: 100%; background: white; padding: 10px; display: flex; 
            justify-content: space-around; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* ×“××•×™×•×ª */
        .avatar-choice { font-size: 5rem; cursor: pointer; transition: 0.3s; padding: 20px; border-radius: 20px; }
        .avatar-choice:hover { background: #e0e0e0; transform: scale(1.1); }
        .character-img { font-size: 6rem; margin: 10px; transition: 0.5s; }

        /* ×›×¤×ª×•×¨×™ ×ª×¤×¨×™×˜ */
        .btn {
            padding: 20px 40px; font-size: 1.5rem; border: none; border-radius: 50px;
            color: white; font-weight: bold; cursor: pointer; margin: 10px;
            box-shadow: 0 5px 0 rgba(0,0,0,0.2); width: 80%;
        }

        /* ×¢×™×¦×•×‘ ×©×œ×‘×™× ×•× ×™×§×•×“ */
        .progress-container { width: 80%; background: #ddd; border-radius: 20px; height: 20px; margin: 10px 0; }
        .progress-bar { width: 0%; height: 100%; background: #FFD600; border-radius: 20px; transition: 0.5s; }

        /* ××§×œ×“×ª */
        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; width: 90%; max-width: 320px; }
        .key { padding: 15px; font-size: 1.5rem; border: none; border-radius: 12px; background: white; box-shadow: 0 4px 0 #bbb; }
        .key:active { transform: translateY(2px); box-shadow: 0 2px 0 #bbb; }

        /* ×‘×•×¢×ª ×“×™×‘×•×¨ */
        .bubble {
            background: white; border-radius: 20px; padding: 10px 20px;
            position: relative; margin-bottom: 10px; border: 3px solid #333;
            display: none; font-weight: bold;
        }

        .level-badge { background: #e74c3c; color: white; padding: 5px 15px; border-radius: 15px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="char-screen" class="screen active">
        <h1>××™ ×”×’×™×‘×•×¨/×” ×©×œ×š?</h1>
        <div style="display: flex;">
            <div class="avatar-choice" onclick="selectChar('ğŸ‘¦')">ğŸ‘¦<br><small style="font-size: 1rem;">×‘×Ÿ</small></div>
            <div class="avatar-choice" onclick="selectChar('ğŸ‘§')">ğŸ‘§<br><small style="font-size: 1rem;">×‘×ª</small></div>
        </div>
    </div>

    <div id="menu-screen" class="screen">
        <h2 id="welcome-msg">×”×™×™ ×’×™×‘×•×¨!</h2>
        <button class="btn" style="background:var(--plus)" onclick="startLevel('plus')">â• ×—×™×‘×•×¨</button>
        <button class="btn" style="background:var(--minus)" onclick="startLevel('minus')">â– ×—×™×¡×•×¨</button>
        <button class="btn" style="background:var(--mult)" onclick="startLevel('mult')">âœ–ï¸ ×›×¤×œ</button>
    </div>

    <div id="game-screen" class="screen">
        <div class="status-bar">
            <div class="level-badge">×©×œ×‘ <span id="level-num">1</span></div>
            <div id="score-display">â­ 0</div>
            <button onclick="goToMenu()">ğŸ </button>
        </div>

        <div class="progress-container"><div id="progress" class="progress-bar"></div></div>

        <div id="bubble" class="bubble">×›×œ ×”×›×‘×•×“! ğŸš€</div>
        <div id="player-char" class="character-img">ğŸ‘¦</div>

        <div style="font-size: 3.5rem; font-weight: bold;" id="question">5 + 5</div>
        <div style="font-size: 2.5rem; color: #7f8c8d; margin-bottom: 10px;" id="answer-view">?</div>

        <div class="keypad">
            <button class="key" onclick="press(1)">1</button><button class="key" onclick="press(2)">2</button><button class="key" onclick="press(3)">3</button>
            <button class="key" onclick="press(4)">4</button><button class="key" onclick="press(5)">5</button><button class="key" onclick="press(6)">6</button>
            <button class="key" onclick="press(7)">7</button><button class="key" onclick="press(8)">8</button><button class="key" onclick="press(9)">9</button>
            <button class="key" style="background:#ffcdd2" onclick="clearAns()">âŒ</button>
            <button class="key" onclick="press(0)">0</button>
            <button class="key" style="background:#c8e6c9" onclick="check()">âœ…</button>
        </div>
    </div>

    <script>
        let char = '';
        let score = 0;
        let level = 1;
        let mode = '';
        let ans = 0;
        let input = "";
        const funnyMsgs = ["×•×•××•! ××ª×” ×ª×•×ª×—!", "××™×–×• ××”×™×¨×•×ª! âš¡", "×¤×©×•×˜ ×’××•×Ÿ! ğŸ§ ", "××™×Ÿ ×¢×œ×™×š ×‘×¢×•×œ×!", "×™×©×¨ ×œ×—×œ×œ! ğŸš€"];

        function selectChar(c) {
            char = c;
            document.getElementById('player-char').innerText = char;
            document.getElementById('welcome-msg').innerText = "××•×›× ×™× ×œ×©×—×§, " + (char === 'ğŸ‘¦' ? "×’×™×‘×•×¨?" : "×’×™×‘×•×¨×”?");
            showScreen('menu-screen');
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function goToMenu() { showScreen('menu-screen'); }

        function startLevel(m) {
            mode = m;
            score = 0;
            level = 1;
            updateUI();
            newQ();
            showScreen('game-screen');
        }

        function newQ() {
            input = "";
            document.getElementById('answer-view').innerText = "?";
            document.getElementById('bubble').style.display = 'none';
            
            let max = 5 + (level * 5); // ×¨××ª ×”×§×•×©×™ ×¢×•×œ×” ×¢× ×”×©×œ×‘
            let n1 = Math.floor(Math.random() * max) + 1;
            let n2 = Math.floor(Math.random() * max) + 1;

            if (mode === 'plus') { ans = n1 + n2; document.getElementById('question').innerText = n1 + " + " + n2; }
            if (mode === 'minus') { 
                if(n1 < n2) [n1, n2] = [n2, n1];
                ans = n1 - n2; document.getElementById('question').innerText = n1 + " - " + n2; 
            }
            if (mode === 'mult') {
                n1 = Math.floor(Math.random() * (level + 2)) + 1;
                n2 = Math.floor(Math.random() * 10) + 1;
                ans = n1 * n2; document.getElementById('question').innerText = n1 + " Ã— " + n2;
            }
        }

        function press(n) { if(input.length < 3) { input += n; document.getElementById('answer-view').innerText = input; } }
        function clearAns() { input = ""; document.getElementById('answer-view').innerText = "?"; }

        function check() {
            if (parseInt(input) === ans) {
                score += 20;
                if (score >= 100) { level++; score = 0; alert("×›×œ ×”×›×‘×•×“! ×¢×œ×™×ª ×œ×©×œ×‘ " + level); }
                
                let b = document.getElementById('bubble');
                b.innerText = funnyMsgs[Math.floor(Math.random() * funnyMsgs.length)];
                b.style.display = 'block';
                
                updateUI();
                setTimeout(newQ, 1500);
            } else {
                document.getElementById('answer-view').innerText = "×˜×¢×•×ª.. × ×¡×” ×©×•×‘!";
                setTimeout(clearAns, 1000);
            }
        }

        function updateUI() {
            document.getElementById('score-display').innerText = "â­ " + (score + (level-1)*100);
            document.getElementById('level-num').innerText = level;
            document.getElementById('progress').style.width = score + "%";
        }
    </script>
</body>
</html>
